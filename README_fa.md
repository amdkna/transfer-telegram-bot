# ربات تلگرام آگهی سفر

این مخزن شامل یک ربات تلگرام است که به کاربران اجازه می‌دهد از طریق یک گفتگوی چند مرحله‌ای، آگهی‌های مرتبط با سفر (مسافر یا بار) ارسال کنند. ربات، آگهی را در یک دیتابیس SQLite ذخیره می‌کند و سپس یک پیام قالب‌بندی‌شده را به یک کانال مشخص ارسال می‌کند.

---

## پیش‌نیازها

- Python نسخه 3.8 یا بالاتر
- توکن ربات تلگرام (از طریق @BotFather)
- یک کانال تلگرام (عمومی یا خصوصی) که ربات اجازه ارسال پیام در آن را داشته باشد
- Docker و Docker Compose (اختیاری، در صورت تمایل به اجرای ربات در کانتینر)

---

## ساختار فایل‌ها

```
.
├── bot.py
├── preview_template.txt
├── message_template.txt
├── requirements.txt
├── .env
├── ads.db              # (به صورت خودکار ایجاد می‌شود)
└── README.md
```

1. **bot.py**  
   اسکریپت اصلی پایتون که منطق ربات را پیاده‌سازی می‌کند.

2. **preview_template.txt**  
   قالب نمایش پیش‌نمایش آگهی به کاربر قبل از تأیید نهایی.  
   جای‌گذاران:

   - `{role}`        : «مسافر» یا «بار دارم»
   - `{source}`      : متنی که کاربر برای مبدا وارد کرده (کشور، شهر)
   - `{destination}` : متنی که کاربر برای مقصد وارد کرده (کشور، شهر)
   - `{flight_date}` : تاریخ پرواز انتخاب‌شده (YYYY-MM-DD)
   - `{description}` : توضیحات کاربر (یا «ندارد»)
   - `{user_id}`     : نام کاربری تلگرام (بدون @) یا شناسه عددی کاربر

   **نمونه محتوای `preview_template.txt`:**
   ```
   📢 پیش‌نمایش آگهی شما:

   • نوع حمل: {role}
   • مبدا: {source}
   • مقصد: {destination}
   • تاریخ پرواز: {flight_date}
   • توضیحات: {description}

   تماس: @{user_id}

   آیا از ارسال این آگهی مطمئن هستید؟
   ```

3. **message_template.txt**  
   قالب پیام نهایی که به کانال ارسال می‌شود.  
   جای‌گذاران این فایل همان‌های `preview_template.txt` هستند.

   **نمونه محتوای `message_template.txt`:**
   ```
   #{role}
   🛫 مبدا: {source}
   🛬 مقصد: {destination}
   ✈️  تاریخ پرواز: {flight_date}
   توضیحات:
   {description}

   📞 تماس: @{user_id}
   ```

4. **requirements.txt**  
   وابستگی‌های پایتون:
EOF
